let blStore=(()=>{let i="V0.28 / 02.02.2025";var e;let s="blStore",c=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(c){let t=null,o={k:"",ts:0,v:""},r,n=!0,a=0;return(e=c.open("blStore",1)).onsuccess=function(){t=this.result,n=!1},e.onerror=function(){alert("indexedDB request error"),console.error("indexedDB request error"),console.log(evt),n=!1,a=evt.target.error.message},e.onupgradeneeded=function(e){e.target.result.createObjectStore(s,{keyPath:"k"})&&console.log("Upgrade DB",i)},{result:()=>r,get:async t=>{for(;!0===n;)await u(1);try{let e=d().get(t);e.onerror=function(e){a=e.target.error.message,n=!1},e.onsuccess=function(){r=e.result,n=!1}}catch(e){a="ERROR(Store get): "+e,n=!1}for(;!0===n;)await u(1);if(await 0,a)throw a},set:async(e,t)=>{for(;!0===n;)await u(1);o.k=e,o.ts=Date.now(),o.v=t;try{var r=d("readwrite").put(o);r.onerror=function(e){a=e.target.error.message,n=!1},r.onsuccess=function(){n=!1}}catch(e){a="ERROR(Store put): "+e,n=!1}for(;!0===n;)await u(1);if(await 0,a)throw a},count:async()=>{{for(;!0===n;)await u(1);let e=d().count();for(e.onerror=function(e){a=e.target.error.message,n=!1},e.onsuccess=function(){r=e.result,n=!1};!0===n;)await u(1)}if(await 0,a)throw a},iterate:async(e,t)=>{for(var r=e,e=t;!0===n;)await u(1);try{var o=d().openCursor(e);o.onerror=function(e){a=e.target.error.message,n=!1},o.onsuccess=function(e){e=e.target.result;e?(r?r(e.value):console.log("Iterate: ",e.value),e.continue()):n=!1}}catch(e){a="ERROR(Store iterate): "+e,n=!1}for(;!0===n;)await u(1);if(await 0,a)throw a},clearStore:async()=>{for(;!0===n;)await u(1);var e=d("readwrite").clear();for(e.onerror=function(e){a=e.target.error.message,n=!1},e.onsuccess=function(){n=!1};!0===n;)await u(1);if(await 0,a)throw a},remove:async e=>{for(;!0===n;)await u(1);try{var t=d("readwrite").delete(e);t.onerror=function(e){a=e.target.error.message,n=!1},t.onsuccess=function(){n=!1}}catch(e){a="ERROR(Store delete): "+e,n=!1}for(;!0===n;)await u(1);if(await 0,a)throw a},quotaget:async()=>{var e=await navigator.storage.estimate();return{usedMB:(e.usage/1024/1024).toFixed(3),usedPerc:(e.usage/e.quota*100).toFixed(3)}},version:i,copyright:"(C)JoEmbedded.de"};function u(t=1){return new Promise(e=>setTimeout(e,t))}function d(e="readonly"){e=t.transaction(s,e).objectStore(s);return n=!0,r=void 0,a=0,e}}else alert("ERROR: 'indexedDB' not supported")})();"undefined"!=typeof module&&void 0!==module.exports?module.exports.blStore=blStore:"function"==typeof define&&define.amd?define([],function(){return blStore}):window.blStore=blStore;export{blStore};